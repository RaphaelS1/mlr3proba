<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot for PredictionSurv — autoplot.PredictionSurv • mlr3proba</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot for PredictionSurv — autoplot.PredictionSurv"><meta name="description" content='Generates plots for PredictionSurv, depending on argument type:
"calib" (default): Calibration plot comparing the average predicted survival distribution
to a Kaplan-Meier prediction, this is not a comparison of a stratified crank or lp
prediction. object must have distr prediction. geom_line() is used for comparison split
between the prediction (Pred) and Kaplan-Meier estimate (KM). In addition labels are added
for the x (T) and y (S(T)) axes.
"dcalib": Distribution calibration plot. A model is D-calibrated if X% of deaths occur before
the X/100 quantile of the predicted distribution, e.g. if 50% of observations die before their
predicted median survival time. A model is D-calibrated if the resulting plot lies on x = y.
"preds": Matplots the survival curves for all predictions

'><meta property="og:description" content='Generates plots for PredictionSurv, depending on argument type:
"calib" (default): Calibration plot comparing the average predicted survival distribution
to a Kaplan-Meier prediction, this is not a comparison of a stratified crank or lp
prediction. object must have distr prediction. geom_line() is used for comparison split
between the prediction (Pred) and Kaplan-Meier estimate (KM). In addition labels are added
for the x (T) and y (S(T)) axes.
"dcalib": Distribution calibration plot. A model is D-calibrated if X% of deaths occur before
the X/100 quantile of the predicted distribution, e.g. if 50% of observations die before their
predicted median survival time. A model is D-calibrated if the resulting plot lies on x = y.
"preds": Matplots the survival curves for all predictions

'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3proba</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="external-link dropdown-item" href="https://survival-org.github.io/user2024-survival-mlr3/">userR! 2024 Tutorial</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr3book.mlr-org.com/chapters/chapter13/beyond_regression_and_classification.html#sec-survival">Survival Analysis (mlr3 book)</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr3book.mlr-org.com/chapters/chapter13/beyond_regression_and_classification.html#sec-density">Density Estimation (mlr3 book)</a></li>
    <li><a class="external-link dropdown-item" href="https://mlr-org.com/gallery/technical/2023-10-25-bart-survival/">Survival Modeling using BART</a></li>
    <li><a class="external-link dropdown-item" href="https://towardsdatascience.com/neural-networks-for-survival-analysis-in-r-1e0421584ab">Neural Networks for Survival Analysis</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-book"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3proba/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="mlr3 website"><span class="fa fa-link"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot for PredictionSurv</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3proba/blob/main/R/autoplot.R" class="external-link"><code>R/autoplot.R</code></a></small>
      <div class="d-none name"><code>autoplot.PredictionSurv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates plots for <a href="PredictionSurv.html">PredictionSurv</a>, depending on argument <code>type</code>:</p><ul><li><p><code>"calib"</code> (default): Calibration plot comparing the average predicted survival distribution
to a Kaplan-Meier prediction, this is <em>not</em> a comparison of a stratified <code>crank</code> or <code>lp</code>
prediction. <code>object</code> must have <code>distr</code> prediction. <code>geom_line()</code> is used for comparison split
between the prediction (<code>Pred</code>) and Kaplan-Meier estimate (<code>KM</code>). In addition labels are added
for the x (<code>T</code>) and y (<code>S(T)</code>) axes.</p></li>
<li><p><code>"dcalib"</code>: Distribution calibration plot. A model is D-calibrated if X% of deaths occur before
the X/100 quantile of the predicted distribution, e.g. if 50% of observations die before their
predicted median survival time. A model is D-calibrated if the resulting plot lies on x = y.</p></li>
<li><p><code>"preds"</code>: Matplots the survival curves for all predictions</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'PredictionSurv'</span></span>
<span><span class="fu">autoplot</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"calib"</span>,</span>
<span>  task <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  row_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  times <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xyline <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cuts <span class="op">=</span> <span class="fl">11L</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  extend_quantile <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>(<a href="PredictionSurv.html">PredictionSurv</a>).</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>(<code>character(1)</code>)<br>
Name of the column giving the type of censoring. Default is 'right' censoring.</p></dd>


<dt id="arg-task">task<a class="anchor" aria-label="anchor" href="#arg-task"></a></dt>
<dd><p>(<a href="TaskSurv.html">TaskSurv</a>) <br>
If <code>type = "calib"</code> then <code>task</code> is passed to <code>$predict</code> in the Kaplan-Meier learner.</p></dd>


<dt id="arg-row-ids">row_ids<a class="anchor" aria-label="anchor" href="#arg-row-ids"></a></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>) <br>
If <code>type = "calib"</code> then <code>row_ids</code> is passed to <code>$predict</code> in the Kaplan-Meier learner.</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code>) <br>
If <code>type = "calib"</code> then <code>times</code> is the values on the x-axis to plot over,
if <code>NULL</code> uses all times from <code>task</code>.</p></dd>


<dt id="arg-xyline">xyline<a class="anchor" aria-label="anchor" href="#arg-xyline"></a></dt>
<dd><p>(<code>logical(1)</code>) <br>
If <code>TRUE</code> (default) plots the x-y line for <code>type = "dcalib"</code>.</p></dd>


<dt id="arg-cuts">cuts<a class="anchor" aria-label="anchor" href="#arg-cuts"></a></dt>
<dd><p>(<code>integer(1)</code>) <br>
Number of cuts in (0,1) to plot <code>dcalib</code> over, default is <code>11</code>.</p></dd>


<dt id="arg-theme">theme<a class="anchor" aria-label="anchor" href="#arg-theme"></a></dt>
<dd><p>(<code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">ggplot2::theme()</a></code>)<br>
The <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">ggplot2::theme_minimal()</a></code> is applied by default to all plots.</p></dd>


<dt id="arg-extend-quantile">extend_quantile<a class="anchor" aria-label="anchor" href="#arg-extend-quantile"></a></dt>
<dd><p><code>(logical(1))</code> <br>
If <code>TRUE</code> then <code>dcalib</code> will impute NAs from predicted quantile function with the maximum observed outcome time, e.g. if the last predicted survival probability is greater than 0.1, then the last predicted cdf is smaller than 0.9 so F^1(0.9) = NA, this would be imputed with max(times). Default is <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>(<code>any</code>):
Additional arguments, currently unused.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Haider H, Hoehn B, Davis S, Greiner R (2020).
“Effective Ways to Build and Evaluate Individual Survival Distributions.”
<em>Journal of Machine Learning Research</em>, <b>21</b>(85), 1-63.
<a href="https://jmlr.org/papers/v21/18-772.html" class="external-link">https://jmlr.org/papers/v21/18-772.html</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3proba.mlr-org.com">mlr3proba</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3viz.mlr-org.com" class="external-link">mlr3viz</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">learn</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"surv.coxph"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"unemployment"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">=</span> <span class="va">learn</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">300</span><span class="op">)</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="fl">301</span><span class="op">:</span><span class="fl">400</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calibration by comparison of average prediction to Kaplan-Meier</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">p</span>, type <span class="op">=</span> <span class="st">"calib"</span>, task <span class="op">=</span> <span class="va">task</span>, row_ids <span class="op">=</span> <span class="fl">301</span><span class="op">:</span><span class="fl">400</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.PredictionSurv-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Distribution-calibration (D-Calibration)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">p</span>, type <span class="op">=</span> <span class="st">"dcalib"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>All aesthetics have length 1, but the data has 11 rows.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   a single row.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 7 rows containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_line()`).</span>
<span class="r-plt img"><img src="autoplot.PredictionSurv-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predictions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">p</span>, type <span class="op">=</span> <span class="st">"preds"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="autoplot.PredictionSurv-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raphael Sonabend, Franz Kiraly, Michel Lang, John Zobolas, Philip Studener.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

